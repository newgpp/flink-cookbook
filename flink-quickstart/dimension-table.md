### 维表关联

- 实时查询维表
```text
实时查询维表是指用户在Flink算子中直接访问外部数据库，比如用MySQL来进行关联

当我们的流计算数据过大，会给外部系统带来巨大的访问压力
一旦出现比如连接失败、线程池满等情况，由于我们是同步调用
所以一般会导致线程阻塞、Task等待数据返回，影响整体任务的吞吐量
```

- 预加载全量数据
```text
每当我们任务启动时，就将维表数据缓存在内存中，对计算节点的内存消耗较高
不能适用于数据量很大的维度表
```

- LRU缓存
```text
LRU缓存是一种缓存算法，意思是最近很少适用的数据被淘汰

在这种策略中，我们的维表数据天然的被分为冷数据和热数据

RichAsyncFunction：为了解决与外部系统交互时网络延迟成为系统瓶颈的问题

在流式计算环境中，在查询外部维表时，假如访问是同步进行的，那么整体能力势必受限于外部系统
正式因为异步IO的出现，使得访问外部系统可以并发的进行，并且不需要同步等待返回
大大减轻了因为网络等待时间等引起的系统吞吐和延迟问题

在适用异步IO时，一定要使用异步客户端
如果没有异步客户端，我们可以自己创建线程池模拟异步请求
```

- 维表广播
```text
我们还可以通过将维表消息广播出去，或者自定义异步线程池访问维表
甚至还可以自己扩展Flink SQL中关联维表的方式直接使用SQL Join方法关联查询结果
```